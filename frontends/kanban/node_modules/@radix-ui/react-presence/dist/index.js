var e,n,t=require("@radix-ui/react-use-layout-effect").useLayoutEffect,r=require("@radix-ui/react-compose-refs").useComposedRefs,u=(e={},n=require("react"),Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),e);const o=e=>{const{present:n,children:o}=e,i=function(e){const[n,r]=u.useState(),o=u.useRef({}),i=u.useRef(e),c=u.useRef("none"),a=e?"mounted":"unmounted",[d,m]=function(e,n){return u.useReducer(((e,t)=>{const r=n[e][t];return null!=r?r:e}),e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect((()=>{const e=s(o.current);c.current="mounted"===d?e:"none"}),[d]),t((()=>{const n=o.current,t=i.current;if(t!==e){const r=c.current,u=s(n);if(e)m("MOUNT");else if("none"===u||"none"===(null==n?void 0:n.display))m("UNMOUNT");else{const e=r!==u;m(t&&e?"ANIMATION_OUT":"UNMOUNT")}i.current=e}}),[e,m]),t((()=>{if(n){const e=e=>{const t=s(o.current).includes(e.animationName);e.target===n&&t&&m("ANIMATION_END")},t=e=>{e.target===n&&(c.current=s(o.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),()=>{n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}m("ANIMATION_END")}),[n,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:u.useCallback((e=>{e&&(o.current=getComputedStyle(e)),r(e)}),[])}}(n),c="function"==typeof o?o({present:i.isPresent}):u.Children.only(o),a=r(i.ref,c.ref);return"function"==typeof o||i.isPresent?/*#__PURE__*/u.cloneElement(c,{ref:a}):null};function s(e){return(null==e?void 0:e.animationName)||"none"}exports.Presence=o,o.displayName="Presence";
//# sourceMappingURL=index.js.map
