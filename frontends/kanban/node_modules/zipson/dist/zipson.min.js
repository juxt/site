!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.zipson=e()}}(function(){return function(){function e(r,t,n){function E(a,s){if(!t[a]){if(!r[a]){var o="function"==typeof require&&require;if(!s&&o)return o(a,!0);if(T)return T(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var _=t[a]={exports:{}};r[a][0].call(_.exports,function(e){var t=r[a][1][e];return E(t||e)},_,_.exports,e,r,t,n)}return t[a].exports}for(var T="function"==typeof require&&require,a=0;a<n.length;a++)E(n[a]);return E}return e}()({1:[function(e,r,t){"use strict";function n(){return{arrayItemWriters:[],arrayLevel:0}}function E(){return{stringMap:{},integerMap:{},floatMap:{},dateMap:{},lpDateMap:{},stringCount:0,integerCount:0,floatCount:0,dateCount:0,lpDateCount:0}}function T(e,r,t,n,E){R.any(R,e,r,t,n,E)}Object.defineProperty(t,"__esModule",{value:!0});var a=e("./compressor/any"),s=e("./compressor/array"),o=e("./compressor/string"),u=e("./compressor/number"),_=e("./compressor/object"),c=e("./compressor/date"),i=e("./compressor/template/object"),R={any:a.compressAny,array:s.compressArray,object:_.compressObject,string:o.compressString,date:c.compressDate,number:u.compressNumber,template:{Object:i.TemplateObject}};t.makeCompressContext=n,t.makeInvertedIndex=E,t.compress=T},{"./compressor/any":2,"./compressor/array":3,"./compressor/date":4,"./compressor/number":5,"./compressor/object":6,"./compressor/string":7,"./compressor/template/object":8}],2:[function(e,r,t){"use strict";function n(e,r,t,n,T,a){var s=typeof t;"number"===s?e.number(e,r,t,n,T,a):"string"===s?e.string(e,r,t,n,T,a):"boolean"===s?T.write(t?E.BOOLEAN_TRUE_TOKEN:E.BOOLEAN_FALSE_TOKEN):null===t?T.write(E.NULL_TOKEN):void 0===t?T.write(E.UNDEFINED_TOKEN):Array.isArray(t)?e.array(e,r,t,n,T,a):t instanceof Date?e.date(e,r,t.getTime(),n,T,a):e.object(e,r,t,n,T,a)}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants");t.compressAny=n},{"../constants":11}],3:[function(e,r,t){"use strict";function n(e,r,t,n,s,o){++r.arrayLevel>r.arrayItemWriters.length&&r.arrayItemWriters.push(new T.ZipsonStringWriter);var u=r.arrayItemWriters[r.arrayLevel-1],_=r.arrayItemWriters[r.arrayLevel-2]||s;_.write(E.ARRAY_START_TOKEN);var c="",i=0,R=0,p=new e.template.Object(t[0],t[1]);p.isTemplating&&p.compressTemplate(e,r,n,_,o);for(var N=0;N<t.length;N++){var l=t[N];u.value="",void 0===l&&(l=null),N>1&&p.isTemplating&&p.isNextTemplateable(t[N],_),p.isTemplating?p.compressTemplateValues(e,r,n,u,o,t[N]):e.any(e,r,l,n,u,o),u.value===c?(i++,i>=E.ARRAY_REPEAT_COUNT_THRESHOLD?(0===R&&_.write(E.ARRAY_REPEAT_MANY_TOKEN),R++):_.write(E.ARRAY_REPEAT_TOKEN)):(i=0,R>0&&(_.write(a.compressInteger(R)),R=0),_.write(u.value),c=u.value)}R>0&&_.write(a.compressInteger(R)),p.isTemplating&&p.end(_),_.write(E.ARRAY_END_TOKEN),r.arrayLevel--}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("./writer"),a=e("../util");t.compressArray=n},{"../constants":11,"../util":19,"./writer":10}],4:[function(e,r,t){"use strict";function n(e,r,t,n,a,s){var o,u=t/E.DATE_LOW_PRECISION;if(u%1==0)if(void 0!==(o=n.lpDateMap[u]))a.write(""+E.REF_LP_DATE_TOKEN+o);else{var _=T.compressInteger(n.lpDateCount),c=T.compressInteger(u),i=""+E.LP_DATE_TOKEN+c;_.length+E.REFERENCE_HEADER_LENGTH<i.length?(n.lpDateMap[u]=_,n.lpDateCount++,a.write(i)):a.write(""+E.UNREFERENCED_LP_DATE_TOKEN+c)}else if(void 0!==(o=n.dateMap[t]))a.write(""+E.REF_DATE_TOKEN+o);else{var _=T.compressInteger(n.dateCount),c=T.compressInteger(t),i=""+E.DATE_TOKEN+c;_.length+E.REFERENCE_HEADER_LENGTH<i.length?(n.dateMap[t]=_,n.dateCount++,a.write(i)):a.write(""+E.UNREFERENCED_DATE_TOKEN+c)}}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("../util");t.compressDate=n},{"../constants":11,"../util":19}],5:[function(e,r,t){"use strict";function n(e,r,t,n,a,s){var o;if(t%1==0)if(t<E.INTEGER_SMALL_EXCLUSIVE_BOUND_UPPER&&t>E.INTEGER_SMALL_EXCLUSIVE_BOUND_LOWER)a.write(E.INTEGER_SMALL_TOKENS[t+E.INTEGER_SMALL_TOKEN_ELEMENT_OFFSET]);else if(void 0!==(o=n.integerMap[t]))a.write(""+E.REF_INTEGER_TOKEN+o);else{var u=T.compressInteger(n.integerCount),_=T.compressInteger(t),c=""+E.INTEGER_TOKEN+_;u.length+E.REFERENCE_HEADER_LENGTH<c.length?(n.integerMap[t]=u,n.integerCount++,a.write(c)):a.write(""+E.UNREFERENCED_INTEGER_TOKEN+_)}else{var i=T.compressFloat(t,s.fullPrecisionFloats);if(void 0!==(o=n.floatMap[i]))a.write(""+E.REF_FLOAT_TOKEN+o);else{var u=T.compressInteger(n.floatCount),c=""+E.FLOAT_TOKEN+i;u.length+E.REFERENCE_HEADER_LENGTH<c.length?(n.floatMap[i]=u,n.floatCount++,a.write(c)):a.write(""+E.UNREFERENCED_FLOAT_TOKEN+i)}}}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("../util");t.compressNumber=n},{"../constants":11,"../util":19}],6:[function(e,r,t){"use strict";function n(e,r,t,n,T,a){T.write(E.OBJECT_START_TOKEN);var s=Object.keys(t),o=new e.template.Object(t[s[0]],t[s[1]]);o.isTemplating&&o.compressTemplate(e,r,n,T,a);for(var u=0;u<s.length;u++)if(u>1&&o.isTemplating&&o.isNextTemplateable(t[s[u]],T),o.isTemplating)e.string(e,r,s[u],n,T,a),o.compressTemplateValues(e,r,n,T,a,t[s[u]]);else{var _=s[u],c=t[_];void 0!==c&&(e.string(e,r,_,n,T,a),e.any(e,r,c,n,T,a))}o.isTemplating&&o.end(T),T.write(E.OBJECT_END_TOKEN)}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants");t.compressObject=n},{"../constants":11}],7:[function(e,r,t){"use strict";function n(e,r,t,n,a,s){var o,u=E.STRING_IDENT_PREFIX+t;if(s.detectUtcTimestamps&&"Z"===t[t.length-1]&&t.match(E.DATE_REGEX)){var _=Date.parse(t);e.date(e,r,_,n,a,s)}else if(void 0!==(o=n.stringMap[u]))a.write(""+E.REF_STRING_TOKEN+o);else{var c=T.compressInteger(n.stringCount),i=""+E.STRING_TOKEN+t.replace(E.REGEX_ESCAPE_CHARACTER,E.ESCAPE_CHARACTER+E.ESCAPE_CHARACTER).replace(E.REGEX_STRING_TOKEN,E.ESCAPED_STRING_TOKEN)+E.STRING_TOKEN;c.length+E.REFERENCE_HEADER_LENGTH+1<i.length?(n.stringMap[u]=c,n.stringCount++,a.write(i)):a.write(""+E.UNREFERENCED_STRING_TOKEN+t.replace(E.REGEX_ESCAPE_CHARACTER,E.ESCAPE_CHARACTER+E.ESCAPE_CHARACTER).replace(E.REGEX_UNREFERENCED_STRING_TOKEN,E.ESCAPED_UNREFERENCED_STRING_TOKEN)+E.UNREFERENCED_STRING_TOKEN)}}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("../util");t.compressString=n},{"../constants":11,"../util":19}],8:[function(e,r,t){"use strict";function n(e,r,t,E){if(void 0===E&&(E=0),E>6)return!1;var T=Object.keys(e),a=Object.keys(r);if(T.length!==a.length)return!1;if(T.length>10)return!1;T.sort(function(e,r){return e.localeCompare(r)}),a.sort(function(e,r){return e.localeCompare(r)});for(var s=0;s<T.length;s++){var u=T[s],_=a[s];if(u!==_)return!1;var c=e[u],i=r[_];if(o.isObject(c)){if(!o.isObject(i))return!1;var R=[];if(t.push([u,R]),!n(c,i,R,E+1))return!1}else{if(o.isObject(i))return!1;t.push([u])}}return E>0||o.isObject(e)}function E(e,r){if(!r)return!1;if(Object.keys(r).length!==e.length)return!1;for(var t=0;t<e.length;t++){var n=e[t][0],T=e[t].length>1;if(void 0===r[n])return!1;if(T){var a=e[t];a[1];if(!E(e[t][1],r[n]))return!1}else if(o.isObject(r[n]))return!1}return!0}function T(e,r,t,n,E,a){n.write(s.TEMPLATE_OBJECT_START);for(var o=0;o<a.length;o++){var u=a[o][0],_=a[o].length>1;e.string(e,r,u,t,n,E),_&&T(e,r,t,n,E,a[o][1])}n.write(s.TEMPLATE_OBJECT_END)}function a(e,r,t,n,E,T,s){for(var o=0;o<T.length;o++){var u=T[o][0],_=s[u];T[o].length>1?a(e,r,t,n,E,T[o][1],_):e.any(e,r,_,t,n,E)}}Object.defineProperty(t,"__esModule",{value:!0});var s=e("../../constants"),o=e("../util"),u=function(){function e(e,r){this.isTemplating=!1,this.struct=[],null!=e&&null!=r&&(this.isTemplating=n(e,r,this.struct))}return e.prototype.compressTemplate=function(e,r,t,n,E){T(e,r,t,n,E,this.struct)},e.prototype.compressTemplateValues=function(e,r,t,n,E,T){a(e,r,t,n,E,this.struct,T)},e.prototype.isNextTemplateable=function(e,r){this.isTemplating=E(this.struct,e),this.isTemplating||r.write(s.TEMPLATE_OBJECT_FINAL)},e.prototype.end=function(e){e.write(s.TEMPLATE_OBJECT_FINAL)},e}();t.TemplateObject=u},{"../../constants":11,"../util":9}],9:[function(e,r,t){"use strict";function n(e){var r=typeof e;return"number"!==r&&("string"!==r&&("boolean"!==r&&(null!==e&&(!Array.isArray(e)&&(!(e instanceof Date)&&void 0!==e)))))}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=n},{}],10:[function(e,r,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])};return function(r,t){function n(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var E=function(){function e(){}return e}();t.ZipsonWriter=E;var T=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.value="",r}return n(r,e),r.prototype.write=function(e){this.value+=e},r.prototype.end=function(){},r}(E);t.ZipsonStringWriter=T},{}],11:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FLOAT_COMPRESSION_PRECISION=1e3,t.DATE_LOW_PRECISION=1e5,t.FLOAT_FULL_PRECISION_DELIMITER=",",t.FLOAT_REDUCED_PRECISION_DELIMITER=".",t.INTEGER_TOKEN="¢",t.FLOAT_TOKEN="£",t.STRING_TOKEN="¨",t.DATE_TOKEN="ø",t.LP_DATE_TOKEN="±",t.UNREFERENCED_INTEGER_TOKEN="¤",t.UNREFERENCED_FLOAT_TOKEN="¥",t.UNREFERENCED_STRING_TOKEN="´",t.UNREFERENCED_DATE_TOKEN="¿",t.UNREFERENCED_LP_DATE_TOKEN="ÿ",t.REF_INTEGER_TOKEN="º",t.REF_FLOAT_TOKEN="Ý",t.REF_STRING_TOKEN="ß",t.REF_DATE_TOKEN="×",t.REF_LP_DATE_TOKEN="ü",t.NULL_TOKEN="§",t.UNDEFINED_TOKEN="µ",t.BOOLEAN_TRUE_TOKEN="»",t.BOOLEAN_FALSE_TOKEN="«",t.ESCAPE_CHARACTER="\\",t.ESCAPED_STRING_TOKEN=""+t.ESCAPE_CHARACTER+t.STRING_TOKEN,t.ESCAPED_UNREFERENCED_STRING_TOKEN=""+t.ESCAPE_CHARACTER+t.UNREFERENCED_STRING_TOKEN,t.REGEX_ESCAPE_CHARACTER=new RegExp(t.ESCAPE_CHARACTER.replace("\\","\\\\"),"g"),t.REGEX_ESCAPED_ESCAPE_CHARACTER=new RegExp(t.ESCAPE_CHARACTER.replace("\\","\\\\")+t.ESCAPE_CHARACTER.replace("\\","\\\\"),"g"),t.REGEX_STRING_TOKEN=new RegExp(t.STRING_TOKEN,"g"),t.REGEX_ESCAPED_STRING_TOKEN=new RegExp(t.ESCAPE_CHARACTER+t.ESCAPED_STRING_TOKEN,"g"),t.REGEX_UNREFERENCED_STRING_TOKEN=new RegExp(t.UNREFERENCED_STRING_TOKEN,"g"),t.REGEX_UNREFERENCED_ESCAPED_STRING_TOKEN=new RegExp(t.ESCAPE_CHARACTER+t.ESCAPED_UNREFERENCED_STRING_TOKEN,"g"),t.DATE_REGEX=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z/,t.OBJECT_START_TOKEN="{",t.OBJECT_END_TOKEN="}",t.TEMPLATE_OBJECT_START="¦",t.TEMPLATE_OBJECT_END="‡",t.TEMPLATE_OBJECT_FINAL="—",t.ARRAY_START_TOKEN="|",t.ARRAY_END_TOKEN="÷",t.ARRAY_REPEAT_TOKEN="þ",t.ARRAY_REPEAT_MANY_TOKEN="^",t.ARRAY_REPEAT_COUNT_THRESHOLD=4,t.REFERENCE_HEADER_LENGTH=1,t.DELIMITING_TOKENS_THRESHOLD=122,t.STRING_IDENT_PREFIX="$",t.INTEGER_SMALL_EXCLUSIVE_BOUND_LOWER=-10,t.INTEGER_SMALL_EXCLUSIVE_BOUND_UPPER=10,t.INTEGER_SMALL_TOKEN_EXCLUSIVE_BOUND_LOWER=191,t.INTEGER_SMALL_TOKEN_EXCLUSIVE_BOUND_UPPER=211,t.INTEGER_SMALL_TOKEN_OFFSET=-201,t.INTEGER_SMALL_TOKEN_ELEMENT_OFFSET=9,t.INTEGER_SMALL_TOKENS=["À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò"]},{}],12:[function(e,r,t){"use strict";function n(){return{strings:[],integers:[],floats:[],dates:[],lpDates:[]}}function E(e){var r={type:s.TargetType.SCALAR,value:void 0},t=new Array(10);return t[0]=r,{index:0,rootTarget:r,stack:t,currentTarget:r,pointer:0,drain:e}}function T(e,r){var t=E(!0);return o.decompressStages(t,e,r),t.rootTarget.value}function a(e){function r(r){if(null===r)t.drain=!0;else{if(0===r.length)return;n+=r}var E=t.index;o.decompressStages(t,n,e);var T=t.index-E;T>0&&(n=n.substring(T),t.index-=T)}var t=E(!1),n="";return{increment:r,cursor:t}}Object.defineProperty(t,"__esModule",{value:!0});var s=e("./decompressor/common"),o=e("./decompressor/stages");t.makeOrderedIndex=n,t.decompress=T,t.decompressIncremental=a},{"./decompressor/common":13,"./decompressor/stages":16}],13:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SKIP_SCALAR={};!function(e){e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.SCALAR="SCALAR",e.TEMPLATE_OBJECT="TEMPLATE_OBJECT",e.TEMPLATE_OBJECT_PROPERTIES="TEMPLATE_OBJECT_PROPERTIES",e.TEMPLATE_OBJECT_ELEMENTS="TEMPLATE_OBJECT_ELEMENTS"}(t.TargetType||(t.TargetType={}))},{}],14:[function(e,r,t){"use strict";function n(e,r,t,n){var o;if(e===E.ARRAY_END_TOKEN||e===E.OBJECT_END_TOKEN)o=r.currentTarget.value,r.currentTarget=r.stack[r.pointer-1],r.pointer--;else if((o=a.decompressScalar(e,t,r,n))===T.SKIP_SCALAR)return!1;return r.currentTarget.type===T.TargetType.SCALAR?r.currentTarget.value=o:r.currentTarget.type===T.TargetType.ARRAY?r.currentTarget.value[r.currentTarget.value.length]=o:r.currentTarget.type===T.TargetType.OBJECT?null!=r.currentTarget.key?(r.currentTarget.value[r.currentTarget.key]=o,r.currentTarget.key=void 0):r.currentTarget.key=o:r.currentTarget.type===T.TargetType.TEMPLATE_OBJECT?(r.currentTarget.currentToken=o,r.currentTarget.currentTokens.push(o)):r.currentTarget.type===T.TargetType.TEMPLATE_OBJECT_PROPERTIES?s.appendTemplateObjectPropertiesValue(r.currentTarget,o):r.currentTarget.type===T.TargetType.TEMPLATE_OBJECT_ELEMENTS&&s.appendTemplateObjectElementsValue(r.currentTarget,o),!0}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("./common"),a=e("./scalar"),s=e("./template");t.decompressElement=n},{"../constants":11,"./common":13,"./scalar":15,"./template":17}],15:[function(e,r,t){"use strict";function n(e,r,t,n){var s,o=t.index,u=t.index+1;if(e===E.STRING_TOKEN&&(s=E.STRING_TOKEN)||e===E.UNREFERENCED_STRING_TOKEN&&(s=E.UNREFERENCED_STRING_TOKEN)){for(var _=!0;_&&u<r.length;){u=r.indexOf(s,u);var c=1;for(_=!1;r[u-c]===E.ESCAPE_CHARACTER;)_=c%2==1,c++;u++}u<=o&&(u=r.length)}else for(;!(r.charCodeAt(u)>E.DELIMITING_TOKENS_THRESHOLD)&&u<r.length;)u++;if(!t.drain&&u===r.length)return T.SKIP_SCALAR;t.index=u-1;var i=e.charCodeAt(0);if(i>E.INTEGER_SMALL_TOKEN_EXCLUSIVE_BOUND_LOWER&&i<E.INTEGER_SMALL_TOKEN_EXCLUSIVE_BOUND_UPPER)return i+E.INTEGER_SMALL_TOKEN_OFFSET;if(e===E.ARRAY_REPEAT_MANY_TOKEN)return a.decompressInteger(r.substring(o+1,u));if(e===E.REF_STRING_TOKEN)return n.strings[a.decompressInteger(r.substring(o+1,u))];if(e===E.REF_INTEGER_TOKEN)return n.integers[a.decompressInteger(r.substring(o+1,u))];if(e===E.REF_FLOAT_TOKEN)return n.floats[a.decompressInteger(r.substring(o+1,u))];if(e===E.REF_DATE_TOKEN)return n.dates[a.decompressInteger(r.substring(o+1,u))];if(e===E.REF_LP_DATE_TOKEN)return n.lpDates[a.decompressInteger(r.substring(o+1,u))];if(e===E.STRING_TOKEN)return n.strings[n.strings.length]=r.substring(o+1,u-1).replace(E.REGEX_ESCAPED_ESCAPE_CHARACTER,E.ESCAPE_CHARACTER).replace(E.REGEX_ESCAPED_STRING_TOKEN,E.STRING_TOKEN);if(e===E.INTEGER_TOKEN)return n.integers[n.integers.length]=a.decompressInteger(r.substring(o+1,u));if(e===E.FLOAT_TOKEN)return n.floats[n.floats.length]=a.decompressFloat(r.substring(o+1,u));if(e===E.DATE_TOKEN)return n.dates[n.dates.length]=new Date(a.decompressInteger(r.substring(o+1,u))).toISOString();if(e===E.LP_DATE_TOKEN)return n.lpDates[n.lpDates.length]=new Date(E.DATE_LOW_PRECISION*a.decompressInteger(r.substring(o+1,u))).toISOString();if(e===E.UNREFERENCED_STRING_TOKEN)return r.substring(o+1,u-1).replace(E.REGEX_ESCAPED_ESCAPE_CHARACTER,E.ESCAPE_CHARACTER).replace(E.REGEX_UNREFERENCED_ESCAPED_STRING_TOKEN,E.UNREFERENCED_STRING_TOKEN);if(e===E.UNREFERENCED_INTEGER_TOKEN)return a.decompressInteger(r.substring(o+1,u));if(e===E.UNREFERENCED_FLOAT_TOKEN)return a.decompressFloat(r.substring(o+1,u));if(e===E.UNREFERENCED_DATE_TOKEN)return new Date(a.decompressInteger(r.substring(o+1,u))).toISOString();if(e===E.UNREFERENCED_LP_DATE_TOKEN)return new Date(E.DATE_LOW_PRECISION*a.decompressInteger(r.substring(o+1,u))).toISOString();if(e===E.BOOLEAN_TRUE_TOKEN)return!0;if(e===E.BOOLEAN_FALSE_TOKEN)return!1;if(e===E.NULL_TOKEN)return null;if(e!==E.UNDEFINED_TOKEN)throw new Error("Unexpected scalar "+e+" at "+o+"-"+u)}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("./common"),a=e("../util");t.decompressScalar=n},{"../constants":11,"../util":19,"./common":13}],16:[function(e,r,t){"use strict";function n(e,r,t){for(;e.index<r.length;e.index++){var n=r[e.index];if(n===E.ARRAY_START_TOKEN)e.currentTarget={type:T.TargetType.ARRAY,value:[]},e.stack[++e.pointer]=e.currentTarget;else if(n===E.OBJECT_START_TOKEN)e.currentTarget={type:T.TargetType.OBJECT,value:{}},e.stack[++e.pointer]=e.currentTarget;else if(n!==E.ARRAY_REPEAT_TOKEN||e.currentTarget.type!==T.TargetType.ARRAY&&e.currentTarget.type!==T.TargetType.TEMPLATE_OBJECT_ELEMENTS)if(n!==E.ARRAY_REPEAT_MANY_TOKEN||e.currentTarget.type!==T.TargetType.ARRAY&&e.currentTarget.type!==T.TargetType.TEMPLATE_OBJECT_ELEMENTS)if(n!==E.TEMPLATE_OBJECT_START||e.currentTarget.type!==T.TargetType.TEMPLATE_OBJECT&&e.currentTarget.type!==T.TargetType.OBJECT&&e.currentTarget.type!==T.TargetType.ARRAY){if(n===E.TEMPLATE_OBJECT_END&&e.currentTarget.type===T.TargetType.TEMPLATE_OBJECT){for(var o=0;o<e.currentTarget.currentTokens.length;o++){var u=e.currentTarget.currentTokens[o];e.currentTarget.paths[e.currentTarget.paths.length]=e.currentTarget.currentRoute.concat(u)}if(e.currentTarget.currentTokens=[],e.currentTarget.currentRoute=e.currentTarget.currentRoute.slice(0,-1),--e.currentTarget.level<0){var _=e.currentTarget.paths,c=e.currentTarget.parentTarget;e.pointer--,c.type===T.TargetType.ARRAY?e.currentTarget={type:T.TargetType.TEMPLATE_OBJECT_ELEMENTS,value:c.value,paths:_,currentPathIndex:0,expectedPaths:_.length,currentObject:{}}:c.type===T.TargetType.OBJECT&&(e.currentTarget={type:T.TargetType.TEMPLATE_OBJECT_PROPERTIES,value:c.value,paths:_,currentPathIndex:-1,expectedPaths:_.length,currentObject:{}}),e.stack[++e.pointer]=e.currentTarget}}else if(n===E.TEMPLATE_OBJECT_FINAL)e.currentTarget=e.stack[--e.pointer];else if(!s.decompressElement(n,e,r,t))return}else if(e.currentTarget.type!==T.TargetType.TEMPLATE_OBJECT){var c=e.currentTarget;e.currentTarget={type:T.TargetType.TEMPLATE_OBJECT,value:void 0,currentTokens:[],currentRoute:[],paths:[],level:0,parentTarget:c},e.stack[++e.pointer]=e.currentTarget}else{for(var o=0;o<e.currentTarget.currentTokens.length-1;o++){var u=e.currentTarget.currentTokens[o];e.currentTarget.paths[e.currentTarget.paths.length]=e.currentTarget.currentRoute.concat(u)}null!=e.currentTarget.currentToken&&e.currentTarget.currentRoute.push(e.currentTarget.currentToken),e.currentTarget.currentTokens=[],e.currentTarget.level++}else{var i=a.decompressScalar(r[e.index],r,e,t);if(i===T.SKIP_SCALAR)return;for(var R=e.currentTarget.value[e.currentTarget.value.length-1],o=0;o<i;o++)e.currentTarget.value.push(R)}else{var R=e.currentTarget.value[e.currentTarget.value.length-1];e.currentTarget.value.push(R)}}}Object.defineProperty(t,"__esModule",{value:!0});var E=e("../constants"),T=e("./common"),a=e("./scalar"),s=e("./element");t.decompressStages=n},{"../constants":11,"./common":13,"./element":14,"./scalar":15}],17:[function(e,r,t){"use strict";function n(e,r){for(var t=e.paths[e.currentPathIndex],n=0,E=e.currentObject;n<t.length-1;n++){var T=t[n];E=E[T]=E[T]||{}}void 0!==r&&(E[t[n]]=r)}function E(e,r){-1===e.currentPathIndex?e.value[r]=e.currentObject={}:n(e,r),++e.currentPathIndex===e.expectedPaths&&(e.currentPathIndex=-1)}function T(e,r){0===e.currentPathIndex&&(e.currentObject={},e.value.push(e.currentObject)),n(e,r),++e.currentPathIndex===e.expectedPaths&&(e.currentPathIndex=0)}Object.defineProperty(t,"__esModule",{value:!0}),t.appendTemplateObjectPropertiesValue=E,t.appendTemplateObjectElementsValue=T},{}],18:[function(e,r,t){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function E(e){var r=_.makeOrderedIndex();return _.decompress(e,r)}function T(){var e=_.makeOrderedIndex(),r=_.decompressIncremental(e),t=r.cursor,n=r.increment;return function(e){if(n(e),null===e)return t.rootTarget.value}}function a(e,r,t){void 0===t&&(t={});var n=o.makeInvertedIndex(),E=o.makeCompressContext();o.compress(E,e,n,r,t),r.end()}function s(e,r){var t=new u.ZipsonStringWriter;return a(e,t,r),t.value}Object.defineProperty(t,"__esModule",{value:!0});var o=e("./compress"),u=e("./compressor/writer"),_=e("./decompress");n(e("./compressor/writer")),n(e("./decompressor/common")),t.parse=E,t.parseIncremental=T,t.stringifyTo=a,t.stringify=s},{"./compress":1,"./compressor/writer":10,"./decompress":12,"./decompressor/common":13}],19:[function(e,r,t){"use strict";function n(e){if(0===e)return"0";for(var r,t="",n=e<0?-e:e,E=0;n>0;)n/=62,r=n%1,E=62*r+.1<<0,n-=r,t=_[E]+t;return t=e<0?"-"+t:t}function E(e){var r=0;if("0"===e[0])return r;for(var t="-"===e[0],n=1,E=t?1:0,T=e.length-1;T>=E;T--){var a=e.charCodeAt(T),s=a-48;a>=97?s-=13:a>=65&&(s-=7),r+=s*n,n*=62}return t?-r:r}function T(e,r){if(void 0===r&&(r=!1),r){var t=e.toString().split("."),E=t[0],T=t[1];return""+("-0"===E?"-":"")+n(parseInt(E))+s.FLOAT_FULL_PRECISION_DELIMITER+T}var E=e>=o?Math.floor(e):e<=u?Math.ceil(e):e<<0,T=Math.round(s.FLOAT_COMPRESSION_PRECISION*(e%1));return""+n(E)+s.FLOAT_REDUCED_PRECISION_DELIMITER+n(T)}function a(e){if(e.indexOf(s.FLOAT_FULL_PRECISION_DELIMITER)>-1){var r=e.split(s.FLOAT_FULL_PRECISION_DELIMITER),t=r[0],n=r[1],T="-0"===t?-1:1,a=E(t);return T*parseFloat(a+"."+n)}var o=e.split(s.FLOAT_REDUCED_PRECISION_DELIMITER),t=o[0],n=o[1],a=E(t);return a+E(n)/s.FLOAT_COMPRESSION_PRECISION}Object.defineProperty(t,"__esModule",{value:!0});var s=e("./constants"),o=2147483648,u=-2147483649,_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";t.compressInteger=n,t.decompressInteger=E,t.compressFloat=T,t.decompressFloat=a},{"./constants":11}]},{},[18])(18)});