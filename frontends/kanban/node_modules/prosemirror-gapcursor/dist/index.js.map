{"version":3,"file":"index.js","sources":["../src/gapcursor.js","../src/index.js"],"sourcesContent":["import {Selection, NodeSelection} from \"prosemirror-state\"\nimport {Slice} from \"prosemirror-model\"\n\n// ::- Gap cursor selections are represented using this class. Its\n// `$anchor` and `$head` properties both point at the cursor position.\nexport class GapCursor extends Selection {\n  // :: (ResolvedPos)\n  // Create a gap cursor.\n  constructor($pos) {\n    super($pos, $pos)\n  }\n\n  map(doc, mapping) {\n    let $pos = doc.resolve(mapping.map(this.head))\n    return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos)\n  }\n\n  content() { return Slice.empty }\n\n  eq(other) {\n    return other instanceof GapCursor && other.head == this.head\n  }\n\n  toJSON() {\n    return {type: \"gapcursor\", pos: this.head}\n  }\n\n  static fromJSON(doc, json) {\n    if (typeof json.pos != \"number\") throw new RangeError(\"Invalid input for GapCursor.fromJSON\")\n    return new GapCursor(doc.resolve(json.pos))\n  }\n\n  getBookmark() { return new GapBookmark(this.anchor) }\n\n  static valid($pos) {\n    let parent = $pos.parent\n    if (parent.isTextblock || !closedBefore($pos) || !closedAfter($pos)) return false\n    let override = parent.type.spec.allowGapCursor\n    if (override != null) return override\n    let deflt = parent.contentMatchAt($pos.index()).defaultType\n    return deflt && deflt.isTextblock\n  }\n\n  static findFrom($pos, dir, mustMove) {\n    search: for (;;) {\n      if (!mustMove && GapCursor.valid($pos)) return $pos\n      let pos = $pos.pos, next = null\n      // Scan up from this position\n      for (let d = $pos.depth;; d--) {\n        let parent = $pos.node(d)\n        if (dir > 0 ? $pos.indexAfter(d) < parent.childCount : $pos.index(d) > 0) {\n          next = parent.child(dir > 0 ? $pos.indexAfter(d) : $pos.index(d) - 1)\n          break\n        } else if (d == 0) {\n          return null\n        }\n        pos += dir\n        let $cur = $pos.doc.resolve(pos)\n        if (GapCursor.valid($cur)) return $cur\n      }\n\n      // And then down into the next node\n      for (;;) {\n        let inside = dir > 0 ? next.firstChild : next.lastChild\n        if (!inside) {\n          if (next.isAtom && !next.isText && !NodeSelection.isSelectable(next)) {\n            $pos = $pos.doc.resolve(pos + next.nodeSize * dir)\n            mustMove = false\n            continue search\n          }\n          break\n        }\n        next = inside\n        pos += dir\n        let $cur = $pos.doc.resolve(pos)\n        if (GapCursor.valid($cur)) return $cur\n      }\n\n      return null\n    }\n  }\n}\n\nGapCursor.prototype.visible = false\n\nSelection.jsonID(\"gapcursor\", GapCursor)\n\nclass GapBookmark {\n  constructor(pos) {\n    this.pos = pos\n  }\n  map(mapping) {\n    return new GapBookmark(mapping.map(this.pos))\n  }\n  resolve(doc) {\n    let $pos = doc.resolve(this.pos)\n    return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos)\n  }\n}\n\nfunction closedBefore($pos) {\n  for (let d = $pos.depth; d >= 0; d--) {\n    let index = $pos.index(d), parent = $pos.node(d)\n    // At the start of this parent, look at next one\n    if (index == 0) {\n      if (parent.type.spec.isolating) return true\n      continue\n    }\n    // See if the node before (or its first ancestor) is closed\n    for (let before = parent.child(index - 1);; before = before.lastChild) {\n      if ((before.childCount == 0 && !before.inlineContent) || before.isAtom || before.type.spec.isolating) return true\n      if (before.inlineContent) return false\n    }\n  }\n  // Hit start of document\n  return true\n}\n\nfunction closedAfter($pos) {\n  for (let d = $pos.depth; d >= 0; d--) {\n    let index = $pos.indexAfter(d), parent = $pos.node(d)\n    if (index == parent.childCount) {\n      if (parent.type.spec.isolating) return true\n      continue\n    }\n    for (let after = parent.child(index);; after = after.firstChild) {\n      if ((after.childCount == 0 && !after.inlineContent) || after.isAtom || after.type.spec.isolating) return true\n      if (after.inlineContent) return false\n    }\n  }\n  return true\n}\n","import {keydownHandler} from \"prosemirror-keymap\"\nimport {TextSelection, NodeSelection, Plugin} from \"prosemirror-state\"\nimport {Fragment, Slice} from \"prosemirror-model\"\nimport {Decoration, DecorationSet} from \"prosemirror-view\"\n\nimport {GapCursor} from \"./gapcursor\"\n\n// :: () â†’ Plugin\n// Create a gap cursor plugin. When enabled, this will capture clicks\n// near and arrow-key-motion past places that don't have a normally\n// selectable position nearby, and create a gap cursor selection for\n// them. The cursor is drawn as an element with class\n// `ProseMirror-gapcursor`. You can either include\n// `style/gapcursor.css` from the package's directory or add your own\n// styles to make it visible.\nexport const gapCursor = function() {\n  return new Plugin({\n    props: {\n      decorations: drawGapCursor,\n\n      createSelectionBetween(_view, $anchor, $head) {\n        if ($anchor.pos == $head.pos && GapCursor.valid($head)) return new GapCursor($head)\n      },\n\n      handleClick,\n      handleKeyDown,\n      handleDOMEvents: {beforeinput}\n    }\n  })\n}\n\nexport {GapCursor}\n\nconst handleKeyDown = keydownHandler({\n  \"ArrowLeft\": arrow(\"horiz\", -1),\n  \"ArrowRight\": arrow(\"horiz\", 1),\n  \"ArrowUp\": arrow(\"vert\", -1),\n  \"ArrowDown\": arrow(\"vert\", 1)\n})\n\nfunction arrow(axis, dir) {\n  let dirStr = axis == \"vert\" ? (dir > 0 ? \"down\" : \"up\") : (dir > 0 ? \"right\" : \"left\")\n  return function(state, dispatch, view) {\n    let sel = state.selection\n    let $start = dir > 0 ? sel.$to : sel.$from, mustMove = sel.empty\n    if (sel instanceof TextSelection) {\n      if (!view.endOfTextblock(dirStr) || $start.depth == 0) return false\n      mustMove = false\n      $start = state.doc.resolve(dir > 0 ? $start.after() : $start.before())\n    }\n    let $found = GapCursor.findFrom($start, dir, mustMove)\n    if (!$found) return false\n    if (dispatch) dispatch(state.tr.setSelection(new GapCursor($found)))\n    return true\n  }\n}\n\nfunction handleClick(view, pos, event) {\n  if (!view.editable) return false\n  let $pos = view.state.doc.resolve(pos)\n  if (!GapCursor.valid($pos)) return false\n  let {inside} = view.posAtCoords({left: event.clientX, top: event.clientY})\n  if (inside > -1 && NodeSelection.isSelectable(view.state.doc.nodeAt(inside))) return false\n  view.dispatch(view.state.tr.setSelection(new GapCursor($pos)))\n  return true\n}\n\n// This is a hack that, when a composition starts while a gap cursor\n// is active, quickly creates an inline context for the composition to\n// happen in, to avoid it being aborted by the DOM selection being\n// moved into a valid position.\nfunction beforeinput(view, event) {\n  if (event.inputType != \"insertCompositionText\" || !(view.state.selection instanceof GapCursor)) return false\n\n  let {$from} = view.state.selection\n  let insert = $from.parent.contentMatchAt($from.index()).findWrapping(view.state.schema.nodes.text)\n  if (!insert) return false\n\n  let frag = Fragment.empty\n  for (let i = insert.length - 1; i >= 0; i--) frag = Fragment.from(insert[i].createAndFill(null, frag))\n  let tr = view.state.tr.replace($from.pos, $from.pos, new Slice(frag, 0, 0))\n  tr.setSelection(TextSelection.near(tr.doc.resolve($from.pos + 1)))\n  view.dispatch(tr)\n  return false\n}\n\nfunction drawGapCursor(state) {\n  if (!(state.selection instanceof GapCursor)) return null\n  let node = document.createElement(\"div\")\n  node.className = \"ProseMirror-gapcursor\"\n  return DecorationSet.create(state.doc, [Decoration.widget(state.selection.head, node, {key: \"gapcursor\"})])\n}\n"],"names":["super","let","Slice","NodeSelection","$cur","Selection","Plugin","const","keydownHandler","TextSelection","Fragment","DecorationSet","Decoration"],"mappings":"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"}