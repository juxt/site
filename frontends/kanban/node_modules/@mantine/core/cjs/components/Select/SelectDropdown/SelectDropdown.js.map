{"version":3,"file":"SelectDropdown.js","sources":["../../../../src/components/Select/SelectDropdown/SelectDropdown.tsx"],"sourcesContent":["import React, { forwardRef, useRef } from 'react';\nimport { DefaultProps, MantineShadow, ClassNames, getDefaultZIndex } from '@mantine/styles';\nimport type { Placement } from '@popperjs/core';\nimport { SelectScrollArea } from '../SelectScrollArea/SelectScrollArea';\nimport { MantineTransition } from '../../Transition';\nimport { Paper } from '../../Paper';\nimport useStyles from './SelectDropdown.styles';\nimport { Popper } from '../../Popper';\n\nexport type SelectDropdownStylesNames = ClassNames<typeof useStyles>;\n\ninterface SelectDropdownProps extends DefaultProps<SelectDropdownStylesNames> {\n  mounted: boolean;\n  transition: MantineTransition;\n  transitionDuration: number;\n  transitionTimingFunction: string;\n  uuid: string;\n  shadow: MantineShadow;\n  maxDropdownHeight?: number | string;\n  withinPortal?: boolean;\n  children: React.ReactNode;\n  __staticSelector: string;\n  dropdownComponent?: React.FC<any>;\n  referenceElement?: HTMLElement;\n  direction?: React.CSSProperties['flexDirection'];\n  onDirectionChange?: (direction: React.CSSProperties['flexDirection']) => void;\n  switchDirectionOnFlip?: boolean;\n  zIndex?: number;\n  dropdownPosition?: 'bottom' | 'top' | 'flip';\n}\n\nexport const SelectDropdown = forwardRef<HTMLDivElement, SelectDropdownProps>(\n  (\n    {\n      mounted,\n      transition,\n      transitionDuration,\n      transitionTimingFunction,\n      uuid,\n      shadow,\n      maxDropdownHeight,\n      withinPortal = true,\n      children,\n      classNames,\n      styles,\n      dropdownComponent,\n      referenceElement,\n      direction = 'column',\n      onDirectionChange,\n      switchDirectionOnFlip = false,\n      zIndex = getDefaultZIndex('popover'),\n      dropdownPosition = 'flip',\n      __staticSelector,\n    }: SelectDropdownProps,\n    ref\n  ) => {\n    const { classes } = useStyles(\n      { native: dropdownComponent !== SelectScrollArea },\n      { classNames, styles, name: __staticSelector }\n    );\n\n    const previousPlacement = useRef<Placement>('bottom');\n\n    return (\n      <Popper\n        referenceElement={referenceElement}\n        mounted={mounted}\n        transition={transition}\n        transitionDuration={transitionDuration}\n        exitTransitionDuration={0}\n        transitionTimingFunction={transitionTimingFunction}\n        position={dropdownPosition === 'flip' ? 'bottom' : dropdownPosition}\n        withinPortal={withinPortal}\n        zIndex={zIndex}\n        modifiers={[\n          {\n            name: 'preventOverflow',\n            enabled: false,\n          },\n          {\n            name: 'flip',\n            enabled: dropdownPosition === 'flip',\n          },\n          {\n            // @ts-ignore\n            name: 'sameWidth',\n            enabled: true,\n            phase: 'beforeWrite',\n            requires: ['computeStyles'],\n            fn: ({ state }) => {\n              // eslint-disable-next-line no-param-reassign\n              state.styles.popper.width = `${state.rects.reference.width}px`;\n            },\n            effect: ({ state }) => {\n              // eslint-disable-next-line no-param-reassign\n              state.elements.popper.style.width = `${state.elements.reference.offsetWidth}px`;\n            },\n          },\n          {\n            // @ts-ignore\n            name: 'directionControl',\n            enabled: true,\n            phase: 'main',\n            fn: ({ state }) => {\n              if (previousPlacement.current !== state.placement) {\n                previousPlacement.current = state.placement;\n\n                const nextDirection = state.placement === 'top' ? 'column-reverse' : 'column';\n\n                if (direction !== nextDirection && switchDirectionOnFlip) {\n                  onDirectionChange && onDirectionChange(nextDirection);\n                }\n              }\n            },\n          },\n        ]}\n      >\n        <div style={{ maxHeight: maxDropdownHeight, display: 'flex' }}>\n          <Paper<'div'>\n            component={(dropdownComponent || 'div') as any}\n            id={`${uuid}-items`}\n            aria-labelledby={`${uuid}-label`}\n            role=\"listbox\"\n            className={classes.dropdown}\n            shadow={shadow}\n            ref={ref}\n            onMouseDown={(event) => event.preventDefault()}\n          >\n            <div style={{ display: 'flex', flexDirection: direction, width: '100%' }}>\n              {children}\n            </div>\n          </Paper>\n        </div>\n      </Popper>\n    );\n  }\n);\n\nSelectDropdown.displayName = '@mantine/core/SelectDropdown';\n"],"names":["forwardRef","styles","getDefaultZIndex","useStyles","SelectScrollArea","useRef","React","Popper","Paper"],"mappings":"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"}