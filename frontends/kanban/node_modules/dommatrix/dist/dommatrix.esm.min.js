// DOMMatrix v1.0.3 | thednp Â© 2022 | MIT-License
function m(m){const t=new f,e=Array.from(m);if(!e.every(m=>!Number.isNaN(m)))throw TypeError(`CSSMatrix: "${m}" must only have numbers.`);if(16===e.length){const[m,r,n,s,i,o,a,c,l,u,f,h,y,d,w,M]=e;t.m11=m,t.a=m,t.m21=i,t.c=i,t.m31=l,t.m41=y,t.e=y,t.m12=r,t.b=r,t.m22=o,t.d=o,t.m32=u,t.m42=d,t.f=d,t.m13=n,t.m23=a,t.m33=f,t.m43=w,t.m14=s,t.m24=c,t.m34=h,t.m44=M}else{if(6!==e.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");{const[m,r,n,s,i,o]=e;t.m11=m,t.a=m,t.m12=r,t.b=r,t.m21=n,t.c=n,t.m22=s,t.d=s,t.m41=i,t.e=i,t.m42=o,t.f=o}}return t}function t(t){const e=Object.keys(new f);if("object"==typeof t&&e.every(m=>m in t))return m([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)}function e(t){if("string"!=typeof t)throw TypeError(`CSSMatrix: "${t}" is not a string.`);const e=String(t).replace(/\s/g,"");let r=new f;const n=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter(m=>m).forEach(t=>{const[e,s]=t.split("(");if(!s)throw TypeError(n);const i=s.split(",").map(m=>m.includes("rad")?parseFloat(m)*(180/Math.PI):parseFloat(m)),[o,a,c,l]=i,u=[o,a,c],f=[o,a,c,l];if("perspective"===e&&o&&[a,c].every(m=>void 0===m))r.m34=-1/o;else if(e.includes("matrix")&&[6,16].includes(i.length)&&i.every(m=>!Number.isNaN(+m))){const t=i.map(m=>Math.abs(m)<1e-6?0:m);r=r.multiply(m(t))}else if("translate3d"===e&&u.every(m=>!Number.isNaN(+m)))r=r.translate(o,a,c);else if("translate"===e&&o&&void 0===c)r=r.translate(o,a||0,0);else if("rotate3d"===e&&f.every(m=>!Number.isNaN(+m))&&l)r=r.rotateAxisAngle(o,a,c,l);else if("rotate"===e&&o&&[a,c].every(m=>void 0===m))r=r.rotate(0,0,o);else if("scale3d"===e&&u.every(m=>!Number.isNaN(+m))&&u.some(m=>1!==m))r=r.scale(o,a,c);else if("scale"!==e||Number.isNaN(o)||1===o||void 0!==c)if("skew"===e&&(o||!Number.isNaN(o)&&a)&&void 0===c)r=r.skew(o,a||0);else{if(!(/[XYZ]/.test(e)&&o&&[a,c].every(m=>void 0===m)&&["translate","rotate","scale","skew"].some(m=>e.includes(m))))throw TypeError(n);if(["skewX","skewY"].includes(e))r=r[e](o);else{const m=e.replace(/[XYZ]/,""),t=e.replace(m,""),n=["X","Y","Z"].indexOf(t),s="scale"===m?1:0,i=[0===n?o:s,1===n?o:s,2===n?o:s];r=r[m](...i)}}else{const m=Number.isNaN(+a)?o:a;r=r.scale(o,m,1)}}),r}function r(m,t){return t?[m.a,m.b,m.c,m.d,m.e,m.f]:[m.m11,m.m12,m.m13,m.m14,m.m21,m.m22,m.m23,m.m24,m.m31,m.m32,m.m33,m.m34,m.m41,m.m42,m.m43,m.m44]}function n(m,t,e){const r=new f;return r.m41=m,r.e=m,r.m42=t,r.f=t,r.m43=e,r}function s(m,t,e){const r=new f,n=Math.PI/180,s=m*n,i=t*n,o=e*n,a=Math.cos(s),c=-Math.sin(s),l=Math.cos(i),u=-Math.sin(i),h=Math.cos(o),y=-Math.sin(o),d=l*h,w=-l*y;r.m11=d,r.a=d,r.m12=w,r.b=w,r.m13=u;const M=c*u*h+a*y;r.m21=M,r.c=M;const p=a*h-c*u*y;return r.m22=p,r.d=p,r.m23=-c*l,r.m31=c*y-a*u*h,r.m32=c*h+a*u*y,r.m33=a*l,r}function i(m,t,e,r){const n=new f,s=Math.sqrt(m*m+t*t+e*e);if(0===s)return n;const i=m/s,o=t/s,a=e/s,c=r*(Math.PI/360),l=Math.sin(c),u=Math.cos(c),h=l*l,y=i*i,d=o*o,w=a*a,M=1-2*(d+w)*h;n.m11=M,n.a=M;const p=2*(i*o*h+a*l*u);n.m12=p,n.b=p,n.m13=2*(i*a*h-o*l*u);const N=2*(o*i*h-a*l*u);n.m21=N,n.c=N;const x=1-2*(w+y)*h;return n.m22=x,n.d=x,n.m23=2*(o*a*h+i*l*u),n.m31=2*(a*i*h+o*l*u),n.m32=2*(a*o*h-i*l*u),n.m33=1-2*(y+d)*h,n}function o(m,t,e){const r=new f;return r.m11=m,r.a=m,r.m22=t,r.d=t,r.m33=e,r}function a(m,t){const e=new f;if(m){const t=m*Math.PI/180,r=Math.tan(t);e.m21=r,e.c=r}if(t){const m=t*Math.PI/180,r=Math.tan(m);e.m12=r,e.b=r}return e}function c(m){return a(m,0)}function l(m){return a(0,m)}function u(t,e){return m([e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44])}class f{constructor(...m){const t=this;if(t.a=1,t.b=0,t.c=0,t.d=1,t.e=0,t.f=0,t.m11=1,t.m12=0,t.m13=0,t.m14=0,t.m21=0,t.m22=1,t.m23=0,t.m24=0,t.m31=0,t.m32=0,t.m33=1,t.m34=0,t.m41=0,t.m42=0,t.m43=0,t.m44=1,m.length){const e=[16,6].some(t=>t===m.length)?m:m[0];return t.setMatrixValue(e)}return t}get isIdentity(){const m=this;return 1===m.m11&&0===m.m12&&0===m.m13&&0===m.m14&&0===m.m21&&1===m.m22&&0===m.m23&&0===m.m24&&0===m.m31&&0===m.m32&&1===m.m33&&0===m.m34&&0===m.m41&&0===m.m42&&0===m.m43&&1===m.m44}get is2D(){const m=this;return 0===m.m31&&0===m.m32&&1===m.m33&&0===m.m34&&0===m.m43&&1===m.m44}setMatrixValue(r){return"string"==typeof r&&r.length&&"none"!==r?e(r):[Array,Float64Array,Float32Array].some(m=>r instanceof m)?m(r):[f,DOMMatrix,Object].some(m=>r instanceof m)?t(r):this}toFloat32Array(m){return Float32Array.from(r(this,m))}toFloat64Array(m){return Float64Array.from(r(this,m))}toString(){const{is2D:m}=this;return`${m?"matrix":"matrix3d"}(${this.toFloat64Array(m).join(", ")})`}toJSON(){const{is2D:m,isIdentity:t}=this;return{...this,is2D:m,isIdentity:t}}multiply(m){return u(this,m)}translate(m,t,e){let r=t,s=e;return void 0===r&&(r=0),void 0===s&&(s=0),u(this,n(m,r,s))}scale(m,t,e){let r=t,n=e;return void 0===r&&(r=m),void 0===n&&(n=1),u(this,o(m,r,n))}rotate(m,t,e){let r=m,n=t||0,i=e||0;return"number"==typeof m&&void 0===t&&void 0===e&&(i=r,r=0,n=0),u(this,s(r,n,i))}rotateAxisAngle(m,t,e,r){if([m,t,e,r].some(m=>Number.isNaN(+m)))throw new TypeError("CSSMatrix: expecting 4 values");return u(this,i(m,t,e,r))}skewX(m){return u(this,c(m))}skewY(m){return u(this,l(m))}skew(m,t){return u(this,a(m,t))}transformPoint(m){const t=this,e=t.m11*m.x+t.m21*m.y+t.m31*m.z+t.m41*m.w,r=t.m12*m.x+t.m22*m.y+t.m32*m.z+t.m42*m.w,n=t.m13*m.x+t.m23*m.y+t.m33*m.z+t.m43*m.w,s=t.m14*m.x+t.m24*m.y+t.m34*m.z+t.m44*m.w;return m instanceof DOMPoint?new DOMPoint(e,r,n,s):{x:e,y:r,z:n,w:s}}}Object.assign(f,{Translate:n,Rotate:s,RotateAxisAngle:i,Scale:o,SkewX:c,SkewY:l,Skew:a,Multiply:u,fromArray:m,fromMatrix:t,fromString:e,toArray:r});Object.assign(f,{Version:"1.0.3"});export{f as default};
